<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}" />
        <param name="configure.url">/admin/plugins/plantuml/config.action</param>
        <param name="plugin-icon">images/icons/plantuml-icon.png</param>
        <param name="plugin-logo">images/plantuml-logo.png</param>
        <param name="plugin-banner">images/plantuml-banner.png</param>
    </plugin-info>

    <resource key="icons" name="icons/" type="download" location="/images/icons/"/>
    <resource name="i18n" type="i18n" location="i18n/plantuml"/>

    <component key="plantuml-configuration-manager"
               name="plantuml configuration manager"
               class="de.griffel.confluence.plugins.plantuml.config.DefaultPlantUmlConfigurationManager" />

    <!-- Confluence <=3.x -->
    <macro name="plantuml"
           class="de.griffel.confluence.plugins.plantuml.PlantUmlMacro"
           key="plantuml-macro"
           icon="/download/resources/${project.groupId}.${project.artifactId}/icons/plantuml-macro-icon.png">
      <category name="visuals"/>
      <parameters>
         <parameter name="type" type="enum" default="plantuml">
            <value name="plantuml"/>
            <value name="ditaa"/>
            <value name="dot"/>
            <value name="jcckit"/>
            <value name="salt"/>
         </parameter>
         <parameter name="title" type="string"/>
         <parameter name="align" type="enum" default="none">
            <value name="none"/>
            <value name="left"/>
            <value name="center"/>
            <value name="right"/>
         </parameter>
         <parameter name="border" type="string"/>
         <parameter name="hspace" type="string"/>
         <parameter name="vspace" type="string"/>
         <parameter name="dropshadow" type="boolean" default="true"/>
         <parameter name="separation" type="boolean" default="true"/>
         <parameter name="format" type="enum" default="PNG">
            <value name="PNG"/>
            <value name="SVG"/>
         </parameter>
         <parameter name="exportName" type="string"/>
         <parameter name="debug" type="boolean" default="false"/>
      </parameters>
      <resource type="velocity" name="help" location="templates/plantuml-help.vm">
        <param name="help-section" value="misc"/>
      </resource>
    </macro>

    <!-- Confluence >=4.x -->
    <xhtml-macro name="plantuml"
           class="de.griffel.confluence.plugins.plantuml.PlantUmlMacroV4"
           key="plantuml-macro-xhtml"
           icon="/download/resources/${project.groupId}.${project.artifactId}/icons/plantuml-macro-icon.png"
           documentation-url="${project.url}">
      <device-type>mobile</device-type>
      <category name="visuals"/>
      <parameters>
         <parameter name="type" type="enum" default="plantuml">
            <value name="plantuml"/>
            <value name="ditaa"/>
            <value name="dot"/>
            <value name="jcckit"/>
            <value name="salt"/>
         </parameter>
         <parameter name="title" type="string"/>
         <parameter name="align" type="enum" default="none">
            <value name="none"/>
            <value name="left"/>
            <value name="center"/>
            <value name="right"/>
         </parameter>
         <parameter name="border" type="string"/>
         <parameter name="hspace" type="string"/>
         <parameter name="vspace" type="string"/>
         <parameter name="dropshadow" type="boolean" default="true"/>
         <parameter name="separation" type="boolean" default="true"/>
         <parameter name="format" type="enum" default="PNG">
            <value name="PNG"/>
            <value name="SVG"/>
         </parameter>
         <parameter name="exportName" type="string"/>
         <parameter name="debug" type="boolean" default="false"/>
      </parameters>
      <resource type="velocity" name="help" location="templates/plantuml-help.vm">
         <param name="help-section" value="misc"/>
      </resource>
    </xhtml-macro>

    <!-- Confluence <=3.x -->
    <macro name="flowchart"
           class="de.griffel.confluence.plugins.plantuml.FlowChartMacro"
           key="flowchart-macro"
           icon="/download/resources/${project.groupId}.${project.artifactId}/icons/flowchart-macro-icon.png">
      <category name="visuals"/>
      <parameters>
         <parameter name="edgeArrowSize" type="string" default="0.8"/>
         <parameter name="nodeShape" type="enum" default="rect">
            <value name="rect"/>
            <value name="ellipse"/>
            <value name="tab"/>
            <value name="note"/>
            <value name="component"/>
            <value name="folder"/>
            <value name="box3d"/>
            <value name="square"/>
         </parameter>
         <parameter name="nodeStyle" type="enum" default="filled">
            <value name="filled"/>
            <value name="diagonals"/>
            <value name="rounded"/>
            <value name="dashed"/>
            <value name="dotted"/>
            <value name="solid"/>
            <value name="bold"/>
         </parameter>
         <parameter name="nodeFillColor" type="string" default="lightyellow"/>
         <parameter name="nodeFontname" type="string" default="Verdana"/>
         <parameter name="nodeFontsize" type="string" default="9"/>
         <parameter name="exportName" type="string"/>
         <parameter name="debug" type="boolean" default="false"/>
      </parameters>
      <resource type="velocity" name="help" location="templates/flowchart-help.vm">
         <param name="help-section" value="misc"/>
      </resource>
    </macro>

    <!-- Confluence >=4.x -->
    <xhtml-macro name="flowchart"
           class="de.griffel.confluence.plugins.plantuml.FlowChartMacroV4"
           key="flowchart-macro-xhtml"
           icon="/download/resources/${project.groupId}.${project.artifactId}/icons/flowchart-macro-icon.png"
           documentation-url="${project.url}">
      <device-type>mobile</device-type>
      <category name="visuals"/>
      <parameters>
         <parameter name="edgeArrowSize" type="string" default="0.8"/>
         <parameter name="nodeShape" type="enum" default="rect">
            <value name="rect"/>
            <value name="ellipse"/>
            <value name="tab"/>
            <value name="note"/>
            <value name="component"/>
            <value name="folder"/>
            <value name="box3d"/>
            <value name="square"/>
         </parameter>
         <parameter name="nodeStyle" type="enum" default="filled">
            <value name="filled"/>
            <value name="diagonals"/>
            <value name="rounded"/>
            <value name="dashed"/>
            <value name="dotted"/>
            <value name="solid"/>
            <value name="bold"/>
         </parameter>
         <parameter name="nodeFillColor" type="string" default="lightyellow"/>
         <parameter name="nodeFontname" type="string" default="Verdana"/>
         <parameter name="nodeFontsize" type="string" default="9"/>
         <parameter name="exportName" type="string"/>
         <parameter name="debug" type="boolean" default="false"/>
      </parameters>
      <resource type="velocity" name="help" location="templates/flowchart-help.vm">
         <param name="help-section" value="misc"/>
      </resource>
    </xhtml-macro>

    <xwork name="plantuml xwork actions" key="plantuml-action-xwork">
        <package name="plantuml-admin-actions" extends="default" namespace="/admin/plugins/plantuml">
         <default-interceptor-ref name="defaultStack"/>
         <action name="config" class="de.griffel.confluence.plugins.plantuml.actions.PlantUmlAdminConfigAction" method="load">
            <result name="error"   type="velocity">/templates/plantuml-admin-config.vm</result>
            <result name="success" type="velocity">/templates/plantuml-admin-config.vm</result>
         </action>
         <action name="save" class="de.griffel.confluence.plugins.plantuml.actions.PlantUmlAdminConfigAction" method="save">
            <interceptor-ref name="validatingStack"/>
            <result name="error"   type="velocity">/templates/plantuml-admin-config.vm</result>
            <result name="success" type="redirect">/admin/plugins/plantuml/config.action</result>
         </action>
      </package>
    </xwork>
</atlassian-plugin>
